#!/bin/bash

cd `dirname $0`/../bin

# 使用方法の表示関数
usage() {
    echo "Usage: $0 D E"
    echo "  X: 自然数 (正の整数)"
    echo "  E: 文字列"
    exit 1
}

# 引数の数を確認
if [ "$#" -ne 2 ]; then
    echo "Error: 引数の数が正しくありません。"
    usage
fi

# 引数を変数に割り当て
R="$1"
E="$2"

# 現在の日時を取得 (例: 20250131_235959)
datetime=$(date '+%Y%m%d_%H%M%S')

# 入力ファイル名を構築
filename="../exec/${R}_${E}_${datetime}.txt"

# 配列を定義（ここでは例として固定の配列を使用）
# 必要に応じて配列の内容を変更してください
array=("0.001" "0.002" "0.003" "0.004" "0.005" "0.006" "0.007" "0.008" "0.009" "0.010" \
"0.011" "0.012" "0.013" "0.014" "0.015" "0.016" "0.017" "0.018" "0.019" "0.020" \
"0.021" "0.022" "0.023" "0.024" "0.025" "0.026" "0.027" "0.028" "0.029" "0.030" \
"0.031" "0.032" "0.033" "0.034" "0.035" "0.036" "0.037" "0.038" "0.039" "0.040" \
"0.041" "0.042" "0.043" "0.044" "0.045" "0.046" "0.047" "0.048" "0.049" "0.050")

# 出力ファイルを作成（存在しない場合）
touch "$filename"

# 配列の要素数だけループ
for element in "${array[@]}"; do
    # コマンドを実行し、標準出力をキャプチャ
    ../exec/unit_exec.sh $R $E $element >> $filename &
done

wait
echo "全ての実行が完了しました。出力ファイル: $filename"
